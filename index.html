<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>GTA Online: Checklist</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9;
            color: #1e293b;
            transition: background-color 0.3s ease;
        }

        /* Fix: Notification layering - Z-index adjusted to be below Navbar (20) */
        #saveNotification { 
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            transform: translateY(-150%); 
            z-index: 10; 
        }
        #saveNotification.show { transform: translateY(130px); } /* Adjusted to show below sticky nav */

        /* Dark Mode logic */
        body.dark-mode { background-color: #0f172a; color: #f1f5f9; }
        .dark-mode .bg-white { background-color: #1e293b !important; border-color: #334155 !important; }
        .dark-mode .text-slate-900, .dark-mode .text-slate-800 { color: #f1f5f9 !important; }
        .dark-mode .mission-label { background-color: #1e293b; border-color: #334155; }
        .dark-mode #searchInput { background-color: #1e293b; color: white; border-color: #475569; }
        .dark-mode .bg-slate-50 { background-color: #0f172a !important; }
        
        /* Fix: Header contrast in Dark Mode */
        .dark-mode .bg-slate-800 { background-color: #334155 !important; }

        .brand-logo { transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); cursor: pointer; }
        .brand-logo:hover { transform: scale(1.15); filter: brightness(1.1); }

        .nav-tab { position: relative; transition: all 0.3s ease; color: #64748b; }
        .nav-tab.active { color: #2563eb; }
        .nav-tab.active::after {
            content: ''; position: absolute; bottom: 0; left: 20%; right: 20%; height: 3px;
            background: #2563eb; border-radius: 10px 10px 0 0;
        }

        .mission-label { transition: all 0.2s ease; border: 1px solid #e2e8f0; }
        .mission-label:hover { border-color: #2563eb; transform: translateY(-2px); }
        
        .tab-content.hidden { display: none; }
        .mission-check { accent-color: #2563eb; }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="pt-52"> 

<div id="saveNotification" class="fixed top-5 right-5 bg-white shadow-2xl p-4 rounded-xl flex items-center gap-4 border-l-4 border-blue-600">
    <div class="bg-blue-50 p-2 rounded-lg text-blue-600"><span>‚ö°</span></div>
    <div>
        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Cloud Sync</p>
        <p class="text-sm font-bold text-slate-800">Empire Data Secured</p>
    </div>
</div>

<div id="loginModal" class="fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-[100] hidden flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl max-w-md w-full p-10 shadow-2xl text-center border border-slate-100">
        <h2 class="text-2xl font-black italic uppercase text-slate-900 mb-2 tracking-tighter">Executive Access</h2>
        <p class="text-slate-500 text-sm mb-8">Synchronize your multi-million dollar empire across all secure terminals.</p>
        <button id="googleSignInBtn" class="w-full bg-slate-900 hover:bg-slate-800 text-white font-black py-4 px-4 rounded-lg flex items-center justify-center gap-3 transition-all transform active:scale-95 shadow-xl">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-5 h-5 bg-white rounded-full">
            SIGN IN WITH GOOGLE
        </button>
        <button onclick="toggleLoginModal()" class="mt-6 text-slate-400 hover:text-slate-600 text-[10px] uppercase font-bold tracking-widest">Abort Connection</button>
    </div>
</div>

<header class="fixed w-full z-20 top-0 start-0">
    <nav class="bg-slate-900 border-b border-slate-800">
        <div class="flex justify-between items-center mx-auto max-w-screen-xl p-2 px-6">
            <div class="flex items-center space-x-6">
                <span class="text-white font-black tracking-tighter text-xs uppercase italic">GTA Online // Checklist</span>
                <button id="loginBtn" onclick="toggleLoginModal()" class="text-slate-400 hover:text-white font-bold text-[10px] uppercase tracking-widest flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-red-500"></span> Offline Mode
                </button>
            </div>
            <button onclick="toggleDarkMode()" id="themeToggle" class="bg-slate-800 text-white text-[10px] font-bold uppercase tracking-widest px-3 py-1 rounded border border-slate-700 hover:bg-slate-700">
                üåô Dark Mode
            </button>
        </div>
    </nav>

    <nav class="bg-white border-b border-slate-200 py-4 px-6 shadow-sm">
        <div class="max-w-screen-xl mx-auto flex justify-between items-center">
            <img src="Pratham-Webs logo.png" class="brand-logo h-10 w-auto" alt="Logo">
            <div class="flex gap-12 text-right">
                <div>
                    <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Outstanding Debt</p>
                    <span id="remainingWorth" class="text-2xl font-black text-rose-600 tracking-tighter">-$0</span>
                </div>
                <div>
                    <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Net Worth Invested</p>
                    <span id="moneyCounter" class="text-4xl font-black text-emerald-600 tracking-tighter">$0</span>
                </div>
            </div>
        </div>
    </nav>

    <nav class="bg-white border-b border-slate-200 shadow-sm">
        <div class="max-w-screen-xl mx-auto flex overflow-x-auto no-scrollbar">
            <button onclick="switchTab('heists')" class="nav-tab active text-[11px] font-black uppercase px-10 py-5 tracking-widest flex items-center gap-2"><span>üé≠</span> Heists</button>
            <button onclick="switchTab('vehicles')" class="nav-tab text-[11px] font-black uppercase px-10 py-5 tracking-widest flex items-center gap-2"><span>üèéÔ∏è</span> Vehicles</button>
            <button onclick="switchTab('businesses')" class="nav-tab text-[11px] font-black uppercase px-10 py-5 tracking-widest flex items-center gap-2"><span>üè¢</span> Businesses</button>
            <button onclick="switchTab('properties')" class="nav-tab text-[11px] font-black uppercase px-10 py-5 tracking-widest flex items-center gap-2"><span>‚öì</span> Properties</button>
            <button onclick="switchTab('ammunation')" class="nav-tab text-[11px] font-black uppercase px-10 py-5 tracking-widest flex items-center gap-2"><span>üî´</span> Arsenal</button>
        </div>
    </nav>
</header>

<main class="max-w-screen-xl mx-auto p-6">
    <div class="mb-8 flex gap-4">
        <div class="relative flex-grow">
            <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400">üîç</span>
            <input type="text" id="searchInput" onkeyup="filterItems()" placeholder="Filter Asset Inventory..." class="w-full bg-white border border-slate-200 p-4 pl-12 rounded-xl text-slate-900 outline-none focus:border-blue-500 transition-all shadow-sm">
        </div>
        <button onclick="resetChecklist()" class="bg-rose-50 hover:bg-rose-600 text-rose-600 hover:text-white border border-rose-200 font-bold px-8 py-4 rounded-xl transition-all uppercase text-xs tracking-widest">Wipe Data</button>
    </div>

    <div class="bg-white rounded-2xl p-8 mb-10 shadow-sm border border-slate-200 relative overflow-hidden">
        <div class="flex justify-between items-end mb-4 relative z-10">
            <div>
                <p class="text-[10px] font-bold text-blue-600 uppercase tracking-[0.3em] mb-1">Career Completion Status</p>
                <span id="progressText" class="text-6xl font-black text-slate-900 tracking-tighter">0%</span>
            </div>
            <div class="text-right">
                <span id="itemCount" class="bg-slate-100 dark:bg-slate-700 px-4 py-2 rounded-full text-[10px] font-black text-slate-500 uppercase tracking-widest">0 / 0 Assets</span>
            </div>
        </div>
        <div class="w-full bg-slate-100 dark:bg-slate-700 rounded-full h-3 overflow-hidden p-[1px] border border-slate-200">
            <div id="progressBar" class="bg-gradient-to-r from-blue-700 to-blue-400 h-full rounded-full transition-all duration-1000 w-0 shadow-sm"></div>
        </div>
    </div>

    <div id="heistsPage" class="tab-content"></div>
    <div id="vehiclesPage" class="tab-content hidden"></div>
    <div id="businessesPage" class="tab-content hidden"></div>
    <div id="propertiesPage" class="tab-content hidden"></div>
    <div id="ammunationPage" class="tab-content hidden"></div>
</main>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "__API_KEY_PLACEHOLDER__",
        authDomain: "gta-online-checklist.firebaseapp.com",
        projectId: "gta-online-checklist",
        storageBucket: "gta-online-checklist.firebasestorage.app",
        messagingSenderId: "224472394787",
        appId: "1:224472394787:web:5304307746fb4f0ee31596",
        measurementId: "G-M0VLFC39DV"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const provider = new GoogleAuthProvider();

    window.toggleDarkMode = () => {
        document.body.classList.toggle('dark-mode');
        const isDark = document.body.classList.contains('dark-mode');
        document.getElementById('themeToggle').innerText = isDark ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
        localStorage.setItem('gta_theme', isDark ? 'dark' : 'light');
    };
    if (localStorage.getItem('gta_theme') === 'dark') toggleDarkMode();

    const dataSet = {
        heists: { title: "Heists & Story Contracts", icon: "üé≠", color: "blue", bg: "bg-slate-800", list: [
            {n:"The Fleeca Job", p:0}, {n:"The Prison Break", p:40000}, {n:"The Humane Labs Raid", p:54000}, 
            {n:"Series A Funding", p:40000}, {n:"The Pacific Standard Job", p:100000}, 
            {n:"Doomsday Act I: Data Breaches", p:65000}, {n:"Doomsday Act II: Bogdan", p:95000}, 
            {n:"Doomsday Act III: Scenario", p:120000}, {n:"Casino Heist (High Roller Setup)", p:25000}, 
            {n:"The Cayo Perico Heist", p:2200000}, {n:"Dr. Dre: The VIP Contract", p:2010000},
            {n:"The Cluckin' Bell Farm Raid", p:0}, {n:"The Chop Shop Robberies", p:1620000},
            {n:"Short Trips (Franklin & Lamar)", p:0}, {n:"Fooligan Jobs (First Dose/Last Dose)", p:0}
        ]},
        vehicles: { title: "The Massive Garage", icon: "üèéÔ∏è", color: "purple", bg: "bg-blue-600", list: [
            {n:"Pegassi Zentorno", p:725000, c:"Super"}, {n:"Progen T20", p:2200000, c:"Super"}, {n:"Grotti Itali RSX", p:3465000, c:"Super"}, 
            {n:"Benefactor Krieger", p:2875000, c:"Super"}, {n:"Dewbauchee Vagner", p:1535000, c:"Super"}, {n:"Principe Deveste Eight", p:1795000, c:"Super"}, 
            {n:"Pegassi Osiris", p:1950000, c:"Super"}, {n:"Truffade Adder", p:1000000, c:"Super"}, {n:"Overflod Entity XF", p:795000, c:"Super"},
            {n:"Grotti X80 Proto", p:2700000, c:"Super"}, {n:"Overflod Entity MT", p:2355000, c:"Super"}, {n:"Pegassi Ignus", p:2765000, c:"Super"},
            {n:"Oppressor Mk II (Maxed)", p:8000000, c:"Weaponized"}, {n:"Pegassi Toreador", p:4250000, c:"Weaponized"}, {n:"Imponte Deluxo", p:5750000, c:"Weaponized"},
            {n:"Grotti Vigilante", p:3750000, c:"Weaponized"}, {n:"Declasse Scramjet", p:4000000, c:"Weaponized"}, {n:"Ocelot Stromberg", p:3185350, c:"Weaponized"},
            {n:"Ruiner 2000", p:4320000, c:"Weaponized"}, {n:"TM-02 Khanjali Tank", p:3850350, c:"Weaponized"}, {n:"APC (Weaponized)", p:3092250, c:"Weaponized"},
            {n:"Buckingham Luxor Deluxe (Gold)", p:10000000, c:"Air"}, {n:"P-996 LAZER Jet", p:6500000, c:"Air"}, {n:"Mammoth Hydra", p:3990000, c:"Air"},
            {n:"Mammoth Avenger (Full)", p:4787500, c:"Air"}, {n:"FH-1 Hunter", p:4123000, c:"Air"}, {n:"Akula (Stealth)", p:3704050, c:"Air"},
            {n:"Buckingham Swift Deluxe", p:5150000, c:"Air"}, {n:"Savage", p:2593500, c:"Air"}, {n:"Cargobob", p:1790000, c:"Air"},
            {n:"Karin Kuruma (Armored)", p:698250, c:"Sports"}, {n:"Bravado Buffalo STX", p:2150000, c:"Sports"}, {n:"Grotti Turismo Omaggio", p:2845000, c:"Super"},
            {n:"Pfister Comet S2", p:1878000, c:"Sports"}, {n:"Obey 10F Widebody", p:1675000, c:"Sports"}, {n:"Elegy Retro Custom", p:904000, c:"Sports"},
            {n:"Truffade Z-Type", p:950000, c:"Classic"}, {n:"Pegassi Infernus", p:440000, c:"Classic"}, {n:"Dewbauchee Champion", p:2995000, c:"Sports"}
        ]},
        businesses: { title: "Executive Empire", icon: "üè¢", color: "green", bg: "bg-emerald-600", list: [
            {n:"Maze Bank Tower (CEO Maxed)", p:4000000}, {n:"Del Perro Nightclub (Maxed)", p:3100000}, 
            {n:"Farmhouse Bunker (Maxed)", p:4300000}, {n:"Land Act Facility (Maxed)", p:5600000}, 
            {n:"Little Seoul Agency (Maxed)", p:4800000}, {n:"Acid Lab (Brickade 6x6)", p:1500000}, 
            {n:"Murrieta Heights Salvage Yard", p:4100000}, {n:"Morningwood Cocaine Lockup", p:2800000}, 
            {n:"Vespucci Meth Lab", p:2600000}, {n:"LSIA Hangar A17", p:5200000}, 
            {n:"Vinewood West MC Clubhouse", p:1500000}, {n:"La Mesa Large Warehouse", p:1900000},
            {n:"Downtown Counterfeit Cash", p:1800000}, {n:"Paleto Bay Weed Farm", p:1200000},
            {n:"Document Forgery Office", p:1000000}
        ]},
        properties: { title: "Real Estate & Service Hubs", icon: "‚öì", color: "yellow", bg: "bg-amber-600", list: [
            {n:"Galaxy Super Yacht (Aquarius)", p:10000000}, {n:"Kosatka Submarine (Full)", p:9085000},
            {n:"Casino Master Penthouse", p:6500000}, {n:"Eclipse Towers", p:1100000}, 
            {n:"Arena Workshop (Maxed)", p:4500000}, {n:"Mission Row Auto Shop", p:2800000}, 
            {n:"Terrorbyte (Maxed)", p:3450000}, {n:"MOC (Maxed)", p:3250000},
            {n:"Vinewood Hills Stilt House", p:800000}, {n:"CEO 60-Car Garage", p:1150000},
            {n:"10-Car Luxury Garage", p:500000}, {n:"The Freakshop", p:0}
        ]},
        ammunation: { title: "MK II Arsenal", icon: "üî´", color: "red", bg: "bg-rose-700", list: [
            {n:"Orbital Cannon Room", p:900000}, {n:"Railgun", p:730000}, 
            {n:"Combat MG Mk II", p:280000}, {n:"Heavy Sniper Mk II", p:320000}, 
            {n:"Widowmaker", p:449000}, {n:"Unholy Hellbringer", p:449000}, 
            {n:"Up-n-Atomizer", p:399000}, {n:"Stun Gun", p:375000},
            {n:"Special Carbine Mk II", p:220000}, {n:"Tactical SMG", p:325000},
            {n:"Military Rifle", p:397000}, {n:"Pump Shotgun Mk II", p:150000}
        ]}
    };

    let user = null;
    let globalTotalWorth = 0;
    Object.values(dataSet).forEach(cat => cat.list.forEach(i => globalTotalWorth += i.p));

    window.toggleLoginModal = () => { document.getElementById('loginModal').classList.toggle('hidden'); };

    document.getElementById('googleSignInBtn').onclick = async () => {
        try { await signInWithPopup(auth, provider); window.toggleLoginModal(); } catch (e) { console.error(e); }
    };

    onAuthStateChanged(auth, async (u) => {
        user = u;
        const btn = document.getElementById('loginBtn');
        if (user) {
            btn.innerHTML = `<span class="w-2 h-2 rounded-full bg-emerald-500"></span> Synced: ${user.displayName.split(' ')[0]}`;
            btn.classList.add('text-emerald-600');
            await loadData();
        }
    });

    async function saveData() {
        const checked = Array.from(document.querySelectorAll('.mission-check:checked')).map(cb => cb.dataset.id);
        localStorage.setItem('gta_sync_save', JSON.stringify(checked));
        if (user) {
            try {
                await setDoc(doc(db, "users", user.uid), { progress: checked });
                const note = document.getElementById('saveNotification');
                note.classList.add('show');
                setTimeout(() => note.classList.remove('show'), 2500);
            } catch (error) { console.error(error); }
        }
    }

    async function loadData() {
        let saved = JSON.parse(localStorage.getItem('gta_sync_save') || '[]');
        if (user) {
            const docSnap = await getDoc(doc(db, "users", user.uid));
            if (docSnap.exists()) saved = docSnap.data().progress;
        }
        document.querySelectorAll('.mission-check').forEach(cb => { cb.checked = saved.includes(cb.dataset.id); });
        updateStats();
    }

    function updateStats() {
        const all = document.querySelectorAll('.mission-check');
        const checked = Array.from(all).filter(c => c.checked);
        const pc = all.length > 0 ? Math.round((checked.length / all.length) * 100) : 0;
        document.getElementById('progressBar').style.width = pc + '%';
        document.getElementById('progressText').innerText = pc + '%';
        document.getElementById('itemCount').innerText = `${checked.length} / ${all.length} Assets Secured`;
        const total = checked.reduce((acc, cb) => acc + parseInt(cb.dataset.price), 0);
        document.getElementById('moneyCounter').innerText = '$' + total.toLocaleString();
        document.getElementById('remainingWorth').innerText = '-$' + (globalTotalWorth - total).toLocaleString();
    }

    window.switchTab = (tabId) => {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
        document.getElementById(tabId + 'Page').classList.remove('hidden');
        document.querySelectorAll('.nav-tab').forEach(el => {
            el.classList.remove('active');
            if(el.getAttribute('onclick').includes(tabId)) el.classList.add('active');
        });
    };

    window.filterItems = () => {
        const query = document.getElementById('searchInput').value.toLowerCase();
        document.querySelectorAll('.tab-content:not(.hidden) .mission-label').forEach(label => {
            label.style.display = label.innerText.toLowerCase().includes(query) ? "flex" : "none";
        });
    };

    window.resetChecklist = () => {
        if(confirm("Factory Reset Progress?")) {
            document.querySelectorAll('.mission-check').forEach(cb => cb.checked = false);
            saveData(); updateStats();
        }
    };

    // Render logic
    Object.keys(dataSet).forEach(key => {
        const data = dataSet[key];
        const container = document.getElementById(key + 'Page');
        
        let content = `
            <div class="bg-white rounded-2xl overflow-hidden mb-10 shadow-sm border border-slate-200">
                <div class="p-6 ${data.bg} border-b border-white/10 flex items-center justify-between">
                    <h3 class="text-sm font-black uppercase tracking-[0.4em] italic text-white flex items-center gap-3">
                        <span class="text-xl">${data.icon}</span> ${data.title}
                    </h3>
                </div>
                <div class="p-8">`;

        if (key === 'vehicles') {
            const cats = [...new Set(data.list.map(i => i.c))];
            content += cats.map(cat => `
                <div class="mb-10 last:mb-0">
                    <h4 class="text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-6 flex items-center gap-3">
                        <span class="w-8 h-[1px] bg-slate-200"></span> ${cat} Class
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${data.list.filter(i => i.c === cat).map(item => {
                            const idx = data.list.indexOf(item);
                            return `
                            <label class="mission-label flex items-center p-5 rounded-xl bg-slate-50 cursor-pointer">
                                <input type="checkbox" data-id="${key}-${idx}" data-price="${item.p}" class="mission-check w-6 h-6 rounded border-slate-300">
                                <div class="ml-5">
                                    <p class="font-bold text-slate-800 text-sm tracking-tight leading-none">${item.n}</p>
                                    <p class="text-[11px] font-black text-emerald-600 mt-2 tracking-widest leading-none">$${item.p.toLocaleString()}</p>
                                </div>
                            </label>`;
                        }).join('')}
                    </div>
                </div>`).join('');
        } else {
            content += `
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    ${data.list.map((item, i) => `
                        <label class="mission-label flex items-center p-5 rounded-xl bg-slate-50 cursor-pointer">
                            <input type="checkbox" data-id="${key}-${i}" data-price="${item.p}" class="mission-check w-6 h-6 rounded border-slate-300">
                            <div class="ml-5">
                                <p class="font-bold text-slate-800 text-sm tracking-tight leading-none">${item.n}</p>
                                <p class="text-[11px] font-black text-emerald-600 mt-2 tracking-widest leading-none">$${item.p.toLocaleString()}</p>
                            </div>
                        </label>`).join('')}
                </div>`;
        }
        content += `</div></div>`;
        container.innerHTML = content;
    });

    document.addEventListener('change', (e) => {
        if(e.target.classList.contains('mission-check')) { updateStats(); saveData(); }
    });

    loadData();
</script>
</body>
</html>