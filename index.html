<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>GTA Online: Inventory & Checklist</title>

    <style>
        .nav-tab.active { background-color: #3182ce; }
        .mission-label { transition: transform 0.1s; cursor: pointer; }
        .mission-label:active { transform: scale(0.98); }
        #saveNotification { transition: all 0.4s ease; transform: translateY(-100px); opacity: 0; }
        #saveNotification.show { transform: translateY(0); opacity: 1; }
        .tab-content.hidden { display: none; }
    </style>
</head>
<body class="bg-gray-100 pt-60"> 

<div id="saveNotification" class="fixed top-5 right-5 z-50 bg-white border-l-4 border-green-500 shadow-xl p-4 rounded flex items-center gap-3">
    <span class="text-green-500 text-xl">ðŸ’¾</span>
    <div>
        <p class="text-[10px] font-bold text-gray-400 uppercase leading-none">System</p>
        <p class="text-sm font-black text-gray-800">Empire Synced to Cloud</p>
    </div>
</div>

<div id="loginModal" class="fixed inset-0 bg-black/80 z-[100] hidden flex items-center justify-center p-4">
    <div class="bg-white rounded-xl max-w-md w-full p-8 shadow-2xl text-center">
        <h2 class="text-2xl font-black italic uppercase text-gray-800 mb-2">Cloud Sync</h2>
        <p class="text-gray-500 text-sm mb-6">Connect your Google account to track your progress on any device.</p>
        <button id="googleSignInBtn" class="w-full bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-bold py-3 px-4 rounded flex items-center justify-center gap-3 transition-all shadow-md">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-5 h-5">
            Sign in with Google
        </button>
        <button onclick="toggleLoginModal()" class="mt-4 text-gray-400 text-[10px] uppercase font-bold">Cancel</button>
    </div>
</div>

<header class="fixed w-full z-20 top-0 start-0 shadow-lg">
    <nav class="bg-[#2d3748] border-b border-gray-700">
        <div class="flex justify-between items-center mx-auto max-w-screen-xl p-3 px-6">
            <div class="flex items-center space-x-8">
                <span class="text-yellow-400 font-bold tracking-widest text-[10px] uppercase">GTA-5 Career Tracker</span>
                <button id="loginBtn" onclick="toggleLoginModal()" class="bg-yellow-400 hover:bg-yellow-500 text-gray-900 px-3 py-1 rounded font-bold text-[10px] uppercase transition-colors">Login / Sync</button>
            </div>
        </div>
    </nav>
    <nav class="bg-white border-b border-gray-200 py-4 px-6">
        <div class="max-w-screen-xl mx-auto flex justify-between items-center">
            <img src="Pratham-Webs logo.png" class="h-12 w-auto" alt="Logo">
            <div class="flex gap-10 text-right">
                <div>
                    <p class="text-[10px] font-bold text-gray-400 uppercase">Remaining</p>
                    <span id="remainingWorth" class="text-xl font-black text-red-500">-$0</span>
                </div>
                <div>
                    <p class="text-[10px] font-bold text-gray-400 uppercase">Invested</p>
                    <span id="moneyCounter" class="text-3xl font-black text-green-600">$0</span>
                </div>
            </div>
        </div>
    </nav>
    <nav class="bg-[#1a202c]">
        <div class="max-w-screen-xl mx-auto flex overflow-x-auto">
            <button onclick="switchTab('heists')" class="nav-tab active text-white text-xs font-bold uppercase px-8 py-4">Heists</button>
            <button onclick="switchTab('vehicles')" class="nav-tab text-white text-xs font-bold uppercase px-8 py-4">Vehicles</button>
            <button onclick="switchTab('businesses')" class="nav-tab text-white text-xs font-bold uppercase px-8 py-4">Businesses</button>
            <button onclick="switchTab('properties')" class="nav-tab text-white text-xs font-bold uppercase px-8 py-4">Properties</button>
            <button onclick="switchTab('ammunation')" class="nav-tab text-white text-xs font-bold uppercase px-8 py-4">Arsenal</button>
        </div>
    </nav>
</header>

<main class="max-w-screen-xl mx-auto p-6">
    <div class="mb-6 flex gap-4">
        <input type="text" id="searchInput" onkeyup="filterItems()" placeholder="Search..." class="flex-grow p-4 rounded-lg border border-gray-300 shadow-sm outline-none">
        <button onclick="resetChecklist()" class="bg-red-600 text-white font-bold px-6 py-4 rounded-lg">Reset Progress</button>
    </div>

    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
        <div class="flex justify-between items-end mb-2">
            <span id="progressText" class="text-4xl font-black text-blue-600">0%</span>
            <span id="itemCount" class="text-xs font-bold text-gray-400 uppercase">0 Items</span>
        </div>
        <div class="w-full bg-gray-100 rounded-full h-4 overflow-hidden border">
            <div id="progressBar" class="bg-blue-600 h-full transition-all duration-700 w-0"></div>
        </div>
    </div>

    <div id="heistsPage" class="tab-content"></div>
    <div id="vehiclesPage" class="tab-content hidden"></div>
    <div id="businessesPage" class="tab-content hidden"></div>
    <div id="propertiesPage" class="tab-content hidden"></div>
    <div id="ammunationPage" class="tab-content hidden"></div>
</main>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // ðŸ”’ VERIFIED: Your Exact Firebase Keys
    const firebaseConfig = {
        apiKey: "AIzaSyCGysd2a7IUO7wDFxbizwB-SBZdWdQckfA",
        authDomain: "gta-online-checklist.firebaseapp.com",
        projectId: "gta-online-checklist",
        storageBucket: "gta-online-checklist.firebasestorage.app",
        messagingSenderId: "224472394787",
        appId: "1:224472394787:web:5304307746fb4f0ee31596",
        measurementId: "G-M0VLFC39DV"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const provider = new GoogleAuthProvider();

    // ðŸ“¦ DATASET: 100% Intact
    const dataSet = {
        heists: { title: "Heists & Story Contracts", color: "blue", bg: "bg-gray-800", list: [
            {n:"The Fleeca Job", p:0}, {n:"The Prison Break", p:40000}, {n:"The Humane Labs Raid", p:54000}, 
            {n:"Series A Funding", p:40000}, {n:"The Pacific Standard Job", p:100000}, 
            {n:"Doomsday Act I: Data Breaches", p:65000}, {n:"Doomsday Act II: Bogdan", p:95000}, 
            {n:"Doomsday Act III: Scenario", p:120000}, {n:"Casino Heist (High Roller Setup)", p:25000}, 
            {n:"The Cayo Perico Heist", p:2200000}, {n:"Dr. Dre: The VIP Contract", p:2010000},
            {n:"The Cluckin' Bell Farm Raid", p:0}, {n:"The Chop Shop Robberies", p:1620000},
            {n:"Short Trips (Franklin & Lamar)", p:0}, {n:"Fooligan Jobs (First Dose/Last Dose)", p:0}
        ]},
        vehicles: { title: "The Massive Garage", color: "purple", bg: "bg-purple-700", list: [
            {n:"Pegassi Zentorno", p:725000, c:"Super"}, {n:"Progen T20", p:2200000, c:"Super"}, {n:"Grotti Itali RSX", p:3465000, c:"Super"}, 
            {n:"Benefactor Krieger", p:2875000, c:"Super"}, {n:"Dewbauchee Vagner", p:1535000, c:"Super"}, {n:"Principe Deveste Eight", p:1795000, c:"Super"}, 
            {n:"Pegassi Osiris", p:1950000, c:"Super"}, {n:"Truffade Adder", p:1000000, c:"Super"}, {n:"Overflod Entity XF", p:795000, c:"Super"},
            {n:"Grotti X80 Proto", p:2700000, c:"Super"}, {n:"Overflod Entity MT", p:2355000, c:"Super"}, {n:"Pegassi Ignus", p:2765000, c:"Super"},
            {n:"Oppressor Mk II (Maxed)", p:8000000, c:"Weaponized"}, {n:"Pegassi Toreador", p:4250000, c:"Weaponized"}, {n:"Imponte Deluxo", p:5750000, c:"Weaponized"},
            {n:"Grotti Vigilante", p:3750000, c:"Weaponized"}, {n:"Declasse Scramjet", p:4000000, c:"Weaponized"}, {n:"Ocelot Stromberg", p:3185350, c:"Weaponized"},
            {n:"Ruiner 2000", p:4320000, c:"Weaponized"}, {n:"TM-02 Khanjali Tank", p:3850350, c:"Weaponized"}, {n:"APC (Weaponized)", p:3092250, c:"Weaponized"},
            {n:"Buckingham Luxor Deluxe (Gold)", p:10000000, c:"Air"}, {n:"P-996 LAZER Jet", p:6500000, c:"Air"}, {n:"Mammoth Hydra", p:3990000, c:"Air"},
            {n:"Mammoth Avenger (Full)", p:4787500, c:"Air"}, {n:"FH-1 Hunter", p:4123000, c:"Air"}, {n:"Akula (Stealth)", p:3704050, c:"Air"},
            {n:"Buckingham Swift Deluxe", p:5150000, c:"Air"}, {n:"Savage", p:2593500, c:"Air"}, {n:"Cargobob", p:1790000, c:"Air"},
            {n:"Karin Kuruma (Armored)", p:698250, c:"Sports"}, {n:"Bravado Buffalo STX", p:2150000, c:"Sports"}, {n:"Grotti Turismo Omaggio", p:2845000, c:"Super"},
            {n:"Pfister Comet S2", p:1878000, c:"Sports"}, {n:"Obey 10F Widebody", p:1675000, c:"Sports"}, {n:"Elegy Retro Custom", p:904000, c:"Sports"},
            {n:"Truffade Z-Type", p:950000, c:"Classic"}, {n:"Pegassi Infernus", p:440000, c:"Classic"}, {n:"Dewbauchee Champion", p:2995000, c:"Sports"}
        ]},
        businesses: { title: "Executive Empire (Maxed Locations)", color: "green", bg: "bg-green-700", list: [
            {n:"Maze Bank Tower (CEO Maxed)", p:4000000}, {n:"Del Perro Nightclub (Maxed)", p:3100000}, 
            {n:"Farmhouse Bunker (Maxed)", p:4300000}, {n:"Land Act Facility (Maxed)", p:5600000}, 
            {n:"Little Seoul Agency (Maxed)", p:4800000}, {n:"Acid Lab (Brickade 6x6 Upgraded)", p:1500000}, 
            {n:"Murrieta Heights Salvage Yard", p:4100000}, {n:"Morningwood Cocaine Lockup", p:2800000}, 
            {n:"Vespucci Meth Lab", p:2600000}, {n:"LSIA Hangar A17 (Maxed)", p:5200000}, 
            {n:"Vinewood West MC Clubhouse", p:1500000}, {n:"La Mesa Large Warehouse", p:1900000},
            {n:"Downtown Counterfeit Cash", p:1800000}, {n:"Paleto Bay Weed Farm", p:1200000},
            {n:"Document Forgery Office", p:1000000}
        ]},
        properties: { title: "Real Estate & Service Hubs", color: "yellow", bg: "bg-yellow-600", list: [
            {n:"Galaxy Super Yacht (Aquarius)", p:10000000}, {n:"Kosatka Submarine (Full)", p:9085000},
            {n:"Casino Master Penthouse", p:6500000}, {n:"Eclipse Towers (Penthouse 3)", p:1100000}, 
            {n:"Arena Workshop (Maxed)", p:4500000}, {n:"Mission Row Auto Shop", p:2800000}, 
            {n:"Terrorbyte (Maxed)", p:3450000}, {n:"MOC (Maxed)", p:3250000},
            {n:"Vinewood Hills Stilt House", p:800000}, {n:"CEO 60-Car Garage", p:1150000},
            {n:"10-Car Luxury Garage", p:500000}, {n:"The Freakshop", p:0}
        ]},
        ammunation: { title: "MK II Arsenal", color: "red", bg: "bg-red-700", list: [
            {n:"Orbital Cannon Room", p:900000}, {n:"Railgun", p:730000}, 
            {n:"Combat MG Mk II (Full Tech)", p:280000}, {n:"Heavy Sniper Mk II (Explosive)", p:320000}, 
            {n:"Widowmaker", p:449000}, {n:"Unholy Hellbringer", p:449000}, 
            {n:"Up-n-Atomizer", p:399000}, {n:"Stun Gun", p:375000},
            {n:"Special Carbine Mk II", p:220000}, {n:"Tactical SMG", p:325000},
            {n:"Military Rifle", p:397000}, {n:"Pump Shotgun Mk II", p:150000}
        ]}
    };

    let user = null;
    let globalTotalWorth = 0;
    Object.values(dataSet).forEach(cat => cat.list.forEach(i => globalTotalWorth += i.p));

    window.toggleLoginModal = () => {
        document.getElementById('loginModal').classList.toggle('hidden');
    };

    document.getElementById('googleSignInBtn').onclick = async () => {
        try {
            await signInWithPopup(auth, provider);
            window.toggleLoginModal();
        } catch (e) {
            console.error("Auth Error:", e);
            alert("Auth Error: Make sure Google is enabled in Firebase Console.");
        }
    };

    onAuthStateChanged(auth, async (u) => {
        user = u;
        const btn = document.getElementById('loginBtn');
        if (user) {
            btn.innerText = `Synced: ${user.displayName.split(' ')[0]}`;
            btn.classList.add('bg-green-500', 'text-white');
            await loadData();
        }
    });

    async function saveData() {
        const checked = Array.from(document.querySelectorAll('.mission-check:checked')).map(cb => cb.dataset.id);
        localStorage.setItem('gta_sync_save', JSON.stringify(checked));
        if (user) {
            try {
                await setDoc(doc(db, "users", user.uid), { progress: checked });
                const note = document.getElementById('saveNotification');
                note.classList.add('show');
                setTimeout(() => note.classList.remove('show'), 2000);
            } catch (error) {
                console.error("Sync Error:", error);
            }
        }
    }

    async function loadData() {
        let saved = JSON.parse(localStorage.getItem('gta_sync_save') || '[]');
        if (user) {
            const docSnap = await getDoc(doc(db, "users", user.uid));
            if (docSnap.exists()) saved = docSnap.data().progress;
        }
        document.querySelectorAll('.mission-check').forEach(cb => {
            cb.checked = saved.includes(cb.dataset.id);
        });
        updateStats();
    }

    function updateStats() {
        const all = document.querySelectorAll('.mission-check');
        const checked = Array.from(all).filter(c => c.checked);
        const pc = all.length > 0 ? Math.round((checked.length / all.length) * 100) : 0;
        document.getElementById('progressBar').style.width = pc + '%';
        document.getElementById('progressText').innerText = pc + '%';
        document.getElementById('itemCount').innerText = `${checked.length} / ${all.length} Items`;
        const totalInvested = checked.reduce((acc, cb) => acc + parseInt(cb.dataset.price), 0);
        document.getElementById('moneyCounter').innerText = '$' + totalInvested.toLocaleString();
        document.getElementById('remainingWorth').innerText = '-$' + (globalTotalWorth - totalInvested).toLocaleString();
    }

    window.switchTab = (tabId) => {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
        document.getElementById(tabId + 'Page').classList.remove('hidden');
        document.querySelectorAll('.nav-tab').forEach(el => el.classList.remove('active'));
        // Find the button that clicked this
        const tabs = document.querySelectorAll('.nav-tab');
        tabs.forEach(t => {
            if(t.getAttribute('onclick').includes(tabId)) t.classList.add('active');
        });
    };

    window.filterItems = () => {
        const query = document.getElementById('searchInput').value.toLowerCase();
        document.querySelectorAll('.tab-content:not(.hidden) .mission-label').forEach(label => {
            label.style.display = label.innerText.toLowerCase().includes(query) ? "flex" : "none";
        });
    };

    window.resetChecklist = () => {
        if(confirm("Clear everything?")) {
            document.querySelectorAll('.mission-check').forEach(cb => cb.checked = false);
            saveData();
            updateStats();
        }
    };

    // Render Logic
    Object.keys(dataSet).forEach(key => {
        const data = dataSet[key];
        document.getElementById(key + 'Page').innerHTML = `
            <div class="bg-white border rounded-lg overflow-hidden mb-4">
                <div class="p-4 ${data.bg} text-white font-bold uppercase italic">${data.title}</div>
                <div class="p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    ${data.list.map((item, i) => `
                        <label class="mission-label flex items-center p-4 border rounded-lg bg-white shadow-sm">
                            <input type="checkbox" data-id="${key}-${i}" data-price="${item.p}" class="mission-check w-5 h-5">
                            <div class="ml-4">
                                <p class="font-bold text-gray-700 text-sm">${item.n}</p>
                                <p class="text-[10px] text-gray-400 mt-1">$${item.p.toLocaleString()}</p>
                            </div>
                        </label>
                    `).join('')}
                </div>
            </div>`;
    });

    document.addEventListener('change', (e) => {
        if(e.target.classList.contains('mission-check')) {
            updateStats();
            saveData();
        }
    });

    loadData();
</script>
</body>
</html>
